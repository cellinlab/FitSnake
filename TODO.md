# TODO 

## 技术选型说明

**Canvas渲染方案：原生Canvas 2D API vs P5.js**

经过技术评估，我们选择原生Canvas 2D API而非P5.js，主要原因：

✅ **性能优势**：P5.js约800kb体积开销，在高帧率游戏中性能损失明显  
✅ **精确控制**：原生API提供更好的渲染控制，适合60FPS游戏需求  
✅ **集成友好**：避免P5.js全局变量，更好与React+TensorFlow.js集成  
✅ **标准化**：Canvas 2D是W3C标准，更适合生产环境和后续扩展  

---

## 环境搭建
[] 初始化 Nodejs 项目
[] 安装 React + Vite
[] 安装 TensorFlow.js 相关依赖
  - @tensorflow/tfjs-core
  - @tensorflow/tfjs-converter 
  - @tensorflow/tfjs-backend-webgl
  - @tensorflow-models/pose-detection
[] 配置 Vite 构建工具
[] 创建项目目录结构

## 核心功能开发

### 姿态识别模块 (src/pose/)
[] 创建 detector.ts - MoveNet 初始化
[] 实现姿态检测器创建函数
[] 实现姿态到方向映射逻辑
  - 举左手=左、举右手=右
  - 抬左腿=下、抬右腿=上
[] 实现方向防抖机制
[] 实现姿态识别循环
[] 添加性能优化（帧率控制）

### 游戏引擎 (src/game/)
[] 创建 engine.ts - 贪吃蛇核心逻辑
  - 蛇的位置和移动
  - 食物生成和碰撞检测
  - 分数计算
  - 游戏状态管理
[] 创建 renderer.ts - 原生Canvas 2D API渲染
  - 网格绘制（高性能直接绘制）
  - 蛇身渲染（矩形路径优化）
  - 食物渲染（圆形路径）
  - 分数显示（文本渲染）
  - 蓝色动作区边框（描边路径）

### 工具函数 (src/utils/)
[] 创建 grid.ts - 网格计算工具

## React 组件开发 (src/components/)

[] 创建 CameraLayer.tsx - 摄像头视频组件
  - 摄像头权限申请
  - 视频流获取和显示
  - 镜像效果处理
[] 创建 CanvasLayer.tsx - 游戏画布组件
  - 原生Canvas 2D上下文初始化
  - 高性能渲染循环集成
  - 网格和边框叠加（避免P5.js开销）
[] 创建 CapsuleButton.tsx - 胶囊按钮组件
  - 开始游戏按钮
  - 再来一局按钮
  - 按钮样式和交互

## 主应用集成
[] 创建 App.tsx - 主应用组件
  - 组件布局和状态管理
  - 摄像头和游戏的协调
  - 姿态识别与游戏控制集成
[] 更新 main.tsx - 应用入口

## 样式和UI
[] 创建 src/styles/theme.css - 主题样式
  - 配色方案实现
    - 主按钮：向日黄 #F7C948
    - 高亮/边框：高饱和蓝 #2E6FF2  
    - 食物：亮绿 #27D845
    - Score：白字 + 轻阴影
[] 实现响应式布局
[] 实现科技感网格视觉效果
[] 实现圆润胶囊按钮样式

## 游戏流程和交互
[] 实现游戏开始流程
  - 摄像头授权提示
  - 站位区域指引
  - 开始按钮交互
[] 实现游戏进行中的UI
  - 实时分数显示
  - 动作区域提示
[] 实现游戏结束流程
  - 失败检测和提示
  - 再来一局功能

## 性能优化和测试
[] 优化姿态识别性能
  - 视频分辨率调整 (640×480)
  - 识别帧率控制 (15-24 FPS)
[] 优化原生Canvas渲染性能
  - 使用requestAnimationFrame优化
  - 减少不必要的重绘
  - 路径缓存和复用
[] 添加错误处理和降级方案
[] 测试不同光照条件下的识别效果
[] 测试不同设备的兼容性

## 部署准备
[] 配置生产构建
[] 准备部署到 GitHub Pages/Vercel
[] 添加使用说明和演示

## 文档完善
[] 更新 README.md 使用说明
[] 添加开发文档
[] 准备演示材料